[include mainsail.cfg]
[include timelapse.cfg]
[include configs/index.cfg]
[include macros/index.cfg]
# [include klicky/klicky-probe.cfg]

[exclude_object]

#[probe]
#z_offset: 7.600

##### VzBoT############
#######################

[printer]
kinematics: corexy
max_velocity: 500
max_accel: 30000
#max_accel_to_decel: 100000
max_z_velocity: 30
max_z_accel: 500
square_corner_velocity: 10

########################
########################

[mcu]
serial:/dev/serial/by-id/usb-Klipper_stm32f407xx_1E001C001147393436343431-if00
restart_method: command

########################
########################
[stepper_x]
step_pin: PE0  # Drive6
dir_pin: PG3
enable_pin: !PG4
microsteps: 16
rotation_distance: 40
endstop_pin: !PG11
position_endstop: -7
position_min: -7
position_max: 330
homing_speed: 45
full_steps_per_rotation: 200
homing_retract_dist: 0
homing_positive_dir: false
step_pulse_duration: 0.000001
#step_pulse_duration: 0.000000100
[tmc2209 stepper_x]
uart_pin: PG2
interpolate: true
run_current: 1.7
hold_current: 1
sense_resistor: 0.110
stealthchop_threshold: 0
#[tmc5160 stepper_x]
#interpolate: false
#cs_pin: PC4
##diag1_pin: PG12
#run_current: 1.8
##hold_current: 0.5
#spi_bus: spi3
#driver_SGT: 1
#sense_resistor: 0.075




[stepper_y]
step_pin: PE1  # Drive5
dir_pin: PF0
enable_pin: !PC15
microsteps: 16
rotation_distance: 40
endstop_pin: !PG12
position_endstop: 0
position_min: 0
position_max: 330
homing_speed: 45
full_steps_per_rotation: 200
homing_retract_dist: 20
homing_positive_dir: false
step_pulse_duration: 0.000001

[tmc2209 stepper_y]
uart_pin: PF1
interpolate: true
run_current: 1.7
hold_current: 1
sense_resistor: 0.110
stealthchop_threshold: 0
#[tmc5160 stepper_y]
#interpolate: false
#cs_pin: PF12
##diag1_pin: PG11
#run_current: 1.8
##hold_current: 0.5
#spi_bus: spi3
#driver_SGT: 1
#sense_resistor: 0.075


[stepper_z]
step_pin: PE15
dir_pin: PE11
enable_pin: !PF2
microsteps: 16
rotation_distance: 4
#endstop_pin: ^PG10
#endstop_pin: probe:z_virtual_endstop
endstop_pin: probe:z_virtual_endstop # use idm as virtual endstop
homing_retract_dist: 0 # idm needs this to be set to 0
#position_endstop: 0
position_min: -30
position_max: 400
full_steps_per_rotation: 200
homing_retract_dist: 25
homing_positive_dir: false
homing_speed: 5.0
second_homing_speed: 2.5
step_pulse_duration: 0.000004

[tmc2209 stepper_z]
interpolate: false
uart_pin: PE10
run_current: 1.0
#hold_current: 0.6
sense_resistor: 0.110
stealthchop_threshold: 0

[extruder]
### LGX Lite (200 * 16 / 562)
step_pin: PE14
dir_pin: !PE8
microsteps: 16
enable_pin: !PE9
#rotation_distance: 5.466192 # LGX Lite
rotation_distance: 4.05 #vz-Alu hextrudort previous value was 4.4
nozzle_diameter: 0.4
filament_diameter: 1.750
heater_pin: PB0
sensor_type: PT1000 #Generic 3950
sensor_pin: PF4
###
#control: pid
#pid_Kp = 27.55
#pid_Ki = 1.275
#pid_Kd = 148.759
min_temp: 0
max_temp: 400
full_steps_per_rotation: 200
max_extrude_only_distance: 500.0
max_extrude_cross_section: 300
max_extrude_only_velocity: 120
max_extrude_only_accel: 10000
min_extrude_temp: 0
pressure_advance: 0.025
pressure_advance_smooth_time: 0.03
step_pulse_duration: 0.000004
[tmc2209 extruder]
interpolate: false
uart_pin: PE7
run_current: 0.8
#hold_current: 0.5
sense_resistor: 0.110
stealthchop_threshold: 0


########################
########################

[heater_bed]
heater_pin: PE5
sensor_type: Generic 3950
sensor_pin: PC1
#control: pid
#pid_Kp: 66.746
#pid_Ki: 3.504
#pid_Kd: 317.878
min_temp: 0
max_temp: 130

########################
########################

[pause_resume]
recover_velocity: 350

########################
########################

[virtual_sdcard]
path: ~/gcode_files

########################
########################

[display_status]

########################
########################

[bed_screws]
screw1: 20,20
screw2: 20,290
screw3: 290,290
screw4: 290,20

[screws_tilt_adjust]
screw1: 20, 20
screw1_name: front left screw
screw2: 290, 20
screw2_name: front right screw
screw3: 290, 290
screw3_name: rear right screw
screw4: 20, 290
screw4_name: rear left screw
screw5: 165, 290
screw5_name: rear mid screw
screw6: 165, 20
screw6_name: front mid screw
horizontal_move_z: 10.
speed: 50.
screw_thread: CW-M3

########################
########################

[input_shaper]
#shaper_freq_x: 93.2
#shaper_type_x: mzv
#shaper_freq_y: 65.6
#shaper_type_y: mzv

[safe_z_home]
home_xy_position: 165, 165
z_hop: 10

[bed_mesh]
speed: 400
horizontal_move_z: 10
mesh_min: 15, 25
mesh_max: 300, 300
probe_count: 15, 15
algorithm: bicubic

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [stepper_z]
#*# position_endstop = 19.700
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 20.910
#*# pid_ki = 2.630
#*# pid_kd = 41.559
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 56.236
#*# pid_ki = 3.098
#*# pid_kd = 255.170
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 93.6
#*# shaper_type_y = ei
#*# shaper_freq_y = 102.8
#*#
#*# [idm model default]
#*# model_coef = 1.3772902361654822,
#*# 	  1.8173002956443238,
#*# 	  0.7808125111636472,
#*# 	  0.2899896684164353,
#*# 	  0.3230825319859966,
#*# 	  0.5864044585468422,
#*# 	  -0.12162613148924732,
#*# 	  -0.5317895233359982,
#*# 	  0.18878739772133252,
#*# 	  0.29098219504280093
#*# model_domain = 3.2268812823023226e-07,3.34494804095377e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 25.538089
#*# model_offset = 0.15000
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.054443, -0.055507, -0.053005, -0.053869, -0.049890, -0.025549, 0.004587, 0.008656, 0.002276, -0.001923, 0.000507, 0.009466, 0.019336, 0.027668, 0.041838
#*# 	  -0.034398, -0.034038, -0.036954, -0.044791, -0.044205, -0.024406, -0.004563, 0.005676, -0.000524, -0.005265, -0.005105, 0.000150, 0.007409, 0.019103, 0.032749
#*# 	  0.020648, -0.012490, -0.024480, -0.027235, -0.022530, -0.009260, 0.001763, 0.001992, 0.004052, 0.002119, 0.002565, -0.001891, 0.001016, 0.015628, 0.028646
#*# 	  0.010467, -0.012238, -0.022873, -0.027246, -0.026344, -0.011260, 0.000376, 0.000539, 0.000640, -0.000145, -0.011321, -0.013744, -0.001378, 0.002821, 0.017487
#*# 	  -0.009616, -0.011775, -0.020644, -0.024131, -0.020891, -0.007993, 0.006405, 0.005402, 0.003402, 0.002302, -0.009389, -0.005393, 0.008043, 0.012576, 0.024677
#*# 	  -0.013673, -0.013960, -0.014611, -0.017571, -0.027166, -0.013308, 0.004898, 0.006364, 0.000711, -0.007663, -0.014432, -0.012609, 0.004343, 0.010191, 0.025715
#*# 	  -0.030543, -0.022587, -0.017395, -0.022838, -0.038455, -0.028298, -0.012554, -0.005148, -0.010860, -0.019575, -0.018881, -0.014791, -0.004194, 0.000973, 0.015649
#*# 	  -0.028063, -0.019021, -0.015077, -0.023215, -0.038304, -0.029819, -0.019503, -0.009148, -0.012780, -0.021142, -0.029368, -0.020544, -0.010352, -0.000039, 0.012073
#*# 	  -0.013652, -0.014745, -0.007273, -0.015613, -0.030123, -0.015084, -0.003345, 0.006156, -0.001729, -0.010423, -0.024496, -0.020993, -0.006135, 0.002955, 0.013550
#*# 	  -0.027458, -0.007380, -0.012530, -0.020729, -0.032994, -0.026356, -0.005543, -0.001769, -0.007085, -0.015547, -0.016447, -0.027309, -0.022065, -0.007286, 0.005931
#*# 	  -0.021406, -0.022261, -0.016940, -0.018568, -0.021558, -0.012291, 0.011217, 0.017456, -0.003220, -0.007759, -0.014908, -0.024629, -0.012981, -0.001728, 0.018903
#*# 	  -0.026981, -0.013071, -0.018224, -0.020728, -0.025390, -0.019845, -0.009339, 0.000993, -0.019082, -0.022732, -0.026235, -0.022990, -0.011445, 0.005424, 0.012074
#*# 	  -0.010796, -0.004854, -0.013525, -0.007904, -0.010970, -0.014067, 0.002561, 0.004545, 0.003625, -0.005199, 0.001058, 0.007007, -0.004179, 0.001066, 0.002818
#*# 	  -0.001566, 0.004480, 0.006449, 0.004377, -0.008711, -0.004211, 0.016118, 0.019671, 0.009907, -0.002801, -0.011873, -0.010979, -0.009975, -0.003302, 0.004797
#*# 	  0.025374, 0.035045, 0.036164, 0.040377, 0.030543, 0.033635, 0.050025, 0.046065, 0.038626, 0.022604, 0.006195, 0.003654, 0.004335, 0.016589, 0.030796
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 15.0
#*# max_x = 300.0
#*# min_y = 25.0
#*# max_y = 300.0
